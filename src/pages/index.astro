---
import Header from "../components/Header.astro";
import Hero from "../components/Hero.astro";
import About from "../components/About.astro";
import Projects from "../components/Projects.astro";
import Experience from "../components/Experience.astro";
import Education from "../components/Education.astro";
import Footer from "../components/Footer.astro";
import { siteConfig } from "../config";
import "../styles/global.css";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/jpeg" href={`${import.meta.env.BASE_URL}profilepic.jpeg`} />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={siteConfig.description} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <title>{siteConfig.name} - {siteConfig.title}</title>
  </head>
  <body>
    <div class="stars" id="stars"></div>
    <Header />
    <section style="position: relative; z-index: 1;">
      <Hero />
      <About />
      <Projects />
      <Experience />
      <Education />
    </section>
    <Footer />

    <script>
      // Galaxy Stars Background
      const canvas = document.createElement('canvas');
      const starsContainer = document.getElementById('stars');
      if (starsContainer) {
        starsContainer.appendChild(canvas);
        const ctx = canvas.getContext('2d');

        let width = window.innerWidth;
        let height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;

        // Star particles
        const stars: Array<{x: number, y: number, radius: number, vx: number, vy: number, opacity: number, pulse: number, pulseSpeed: number}> = [];
        const numStars = 400;

        // Create stars
        for (let i = 0; i < numStars; i++) {
          stars.push({
            x: Math.random() * width,
            y: Math.random() * height,
            radius: Math.random() * 1.5 + 0.5,
            vx: (Math.random() - 0.5) * 0.2,
            vy: (Math.random() - 0.5) * 0.2,
            opacity: Math.random(),
            pulse: Math.random() * Math.PI * 2,
            pulseSpeed: Math.random() * 0.02 + 0.01
          });
        }

        function drawStars() {
          if (!ctx) return;
          ctx.clearRect(0, 0, width, height);

          stars.forEach((star) => {
            // Update position
            star.x += star.vx;
            star.y += star.vy;

            // Wrap around screen
            if (star.x < 0) star.x = width;
            if (star.x > width) star.x = 0;
            if (star.y < 0) star.y = height;
            if (star.y > height) star.y = 0;

            // Update pulse
            star.pulse += star.pulseSpeed;
            const pulseOpacity = (Math.sin(star.pulse) + 1) / 2;

            // Draw star
            ctx.beginPath();
            ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 255, 255, ${star.opacity * pulseOpacity * 0.8})`;
            ctx.fill();

            // Add glow for larger stars
            if (star.radius > 1) {
              ctx.beginPath();
              ctx.arc(star.x, star.y, star.radius * 2, 0, Math.PI * 2);
              const gradient = ctx.createRadialGradient(star.x, star.y, 0, star.x, star.y, star.radius * 2);
              gradient.addColorStop(0, `rgba(173, 216, 255, ${pulseOpacity * 0.3})`);
              gradient.addColorStop(1, 'rgba(173, 216, 255, 0)');
              ctx.fillStyle = gradient;
              ctx.fill();
            }
          });

          requestAnimationFrame(drawStars);
        }

        drawStars();

        // Handle resize
        window.addEventListener('resize', () => {
          width = window.innerWidth;
          height = window.innerHeight;
          canvas.width = width;
          canvas.height = height;
        });
      }
    </script>
  </body>
</html>
